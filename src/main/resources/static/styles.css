body {
  font-family: Arial, sans-serif;
  background: #121212;
  color: #e0e0e0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}

.container {
  text-align: center;
  background: #1e1e1e;
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(0,0,0,0.5);
}

h1 {
  margin-bottom: 20px;
  color: #f5f5f5;
}

.form-container {
  margin: 15px 0;
  padding: 15px;
  background: #2a2a2a;
  border-radius: 8px;
}

input {
  display: block;
  margin: 10px auto;
  padding: 10px;
  border: none;
  border-radius: 6px;
  width: 80%;
}

button {
  background: #444;
  color: white;
  border: none;
  padding: 10px 20px;
  margin-top: 10px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background: #666;
}

async function loadDashboard() {
  const token = localStorage.getItem("token");
  if (!token) {
    window.location.href = "index.html";
    return;
  }

  // Fetch user info
  const meRes = await fetch(`${API_URL}/auth/me`, {
    headers: { "Authorization": token }
  });
  const meData = await meRes.json();
  document.getElementById("welcome").innerText = `Welcome, ${meData.data.username}!`;

  // Fetch routines
  const routinesRes = await fetch(`${API_URL}/routines`);
  const routines = await routinesRes.json();
  const routinesList = document.getElementById("routines");
  routinesList.innerHTML = routines.map(r => `<li>${r.name} - ${r.description}</li>`).join("");

  // Fetch exercises
  const exercisesRes = await fetch(`${API_URL}/exercises`);
  const exercises = await exercisesRes.json();
  const exercisesList = document.getElementById("exercises");
  exercisesList.innerHTML = exercises.map(e => `<li>${e.name} (${e.primaryMuscle})</li>`).join("");

  // Populate select
  const select = document.getElementById("exercise-select");
  exercises.forEach(e => {
    const opt = document.createElement("option");
    opt.value = e.name;
    opt.textContent = e.name;
    select.appendChild(opt);
  });
}

function logWorkout() {
  const exercise = document.getElementById("exercise-select").value;
  const sets = document.getElementById("sets").value;
  const reps = document.getElementById("reps").value;

  const logList = document.getElementById("workout-log");
  const li = document.createElement("li");
  li.textContent = `${exercise} - ${sets} sets x ${reps} reps`;
  logList.appendChild(li);
}

function logout() {
  localStorage.removeItem("token");
  window.location.href = "index.html";
}

// Run dashboard logic if on dashboard.html
if (window.location.pathname.endsWith("dashboard.html")) {
  loadDashboard();
}


